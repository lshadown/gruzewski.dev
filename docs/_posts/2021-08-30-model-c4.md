---
layout: post
title: 'Model C4 â€“ czyli sposÃ³b na przejrzystÄ… architekturÄ™'
tags: [C4, Architektura]
---
Ten wpis bÄ™dzie dotyczyÅ‚ modelowania architektury przy uÅ¼yciu C4, a moÅ¼e bardziej C3 ğŸ™‚ . Metodyka pozwala na przejrzyste przedstawienie architektury naszego systemu kaÅ¼demu, zaczynajÄ…c od biznesu a koÅ„czÄ…c na programistach. ZaletÄ… podejÅ›cia C4 jest bardzo niski prÃ³g wejÅ›cia do tworzenia i czytania diagramÃ³w wykorzystujÄ…cych metodykÄ™ C4.



Model C4 skÅ‚ad siÄ™ z czterech poziomÃ³w, ktÃ³re przedstawiajÄ… odpowiedni poziom modelowania danego systemu. ZaczynajÄ…c od najbardziej abstrakcyjnego, gdzie przedstawiamy tylko funkcjonalnoÅ›ci biznesowe, a koÅ„czÄ…c na poziomie bardzo szczegÃ³Å‚owym, gdzie sÄ… przedstawione klasy naszego systemu.

Aby lepiej przedstawiÄ‡ sposÃ³b modelowania, wykorzystujÄ…c C4 â€“ stworzyÅ‚em diagramy, ktÃ³re przedstawiajÄ… architekturÄ™ sklepu z ksiÄ…Å¼kami. Na potrzeby tego wpisu zaÅ‚oÅ¼yÅ‚em:

* jednego uÅ¼ytkownika, ktÃ³ry korzysta z systemu;
* system sklepu jest monolitem, w ktÃ³rym sÄ… zawarte wszystkie kluczowe funkcjonalnoÅ›ci biznesowe;
* modelowany system korzysta z dwÃ³ch zewnÄ™trznych systemÃ³w: Notification System(umoÅ¼liwia wysÅ‚anie notyfikacji poprzez mail oraz SMS), Payment System(dostarcza nam rÃ³Å¼ne metody pÅ‚atnoÅ›ci).
##Poziom 1 â€“ Diagram kontekstu (System Context)
Jest to najwyÅ¼szy poziom abstrakcji, ktÃ³ry zawiera informacje na temat modelowanego systemu, uÅ¼ytkownikÃ³w korzystajÄ…cych z systemu oraz zewnÄ™trzne systemy. Ten poziom ma pokazaÄ‡ funkcjonalnoÅ›ci biznesowe jakie speÅ‚nia modelowany system. Warto pamiÄ™taÄ‡, aby ten poziom diagramu byÅ‚ minimalistyczny oraz, aby opieraÅ‚ siÄ™ gÅ‚Ã³wnie o funkcjonalnoÅ›ci biznesowe i wskazanie aktorÃ³w (osÃ³b czy systemÃ³w, ktÃ³re bÄ™dÄ… z niego korzystaÅ‚y).

![](../assets/images/posts/2021/model_c4_context.jpg)

##Poziom 2 â€“ Diagram kontenerÃ³w(Container)
Diagram kontenerÃ³w jest kolejnym poziomem w modelu C4. Ten poziom przedstawia aplikacje jako osobne byty, ktÃ³re uruchomione sÄ… osobno np. JAR, baza danych czy aplikacja frontendâ€™owa. CzÄ™sto diagram ten jest nazywany diagramem wdroÅ¼eniowym. Prezentuje on jakie aplikacje powinny byÄ‡ zainstalowane na danym serwerze oraz w jakich technologiach zostaÅ‚y wykonane. WaÅ¼ne, aby na tym poziomie zostaÅ‚y opisane w nawiasach kwadratowych protokoÅ‚y komunikacyjne jakie wystÄ™pujÄ… pomiÄ™dzy kontenerami.

![](../assets/images/posts/2021/model_c4_container.jpg)


## Poziom 3 â€“ Diagram komponentÃ³w (Components)
Przedostatnim poziomem jest diagram komponentÃ³w, ktÃ³ry przedstawia nam wnÄ™trze danego kontenera. Znajdziemy w nim szczegÃ³Å‚y implementacyjne danych komponentÃ³w. Ten poziom jest idealny dla programistÃ³w czy architektÃ³w, pozwala on na zobrazowanie danej aplikacji, pokazujÄ…c jej podziaÅ‚ oraz wykorzystane technologie. OsobiÅ›cie uwaÅ¼am, Å¼e ten poziom w modelu C4 powinien przedstawiaÄ‡ moduÅ‚y czy package (w Java). DziÄ™ki takiemu podejÅ›ciu, osoby przeglÄ…dajÄ…ce dany diagram bÄ™dÄ… widziaÅ‚y korelacje pomiÄ™dzy kodem a diagramem.

![](../assets/images/posts/2021/model_c4_component.jpg)


##Poziom 4 â€“ Diagram klas (Code)

Tak jak mogliÅ›cie sami zobaczyÄ‡, sam Simon Brown odradza tworzenie ostatniego poziomu- przyczyn jest wiele, choÄ‡ niektÃ³rzy uznajÄ…, Å¼e w ich przypadku taki diagram moÅ¼e byÄ‡ uÅ¼yteczny. Trzeba do tego podejÅ›Ä‡ indywidualnie, w zaleÅ¼noÅ›ci od potrzeby danego projektu. OsobiÅ›cie odradzam rÃ³wnieÅ¼ tworzenie tego poziomu, poniewaÅ¼ bardzo ciÄ™Å¼ko jest utrzymaÄ‡ go w aktualnym stanie, a nieaktualne dane mogÄ… wprowadziÄ‡ w przyszÅ‚oÅ›ci duÅ¼y zamÄ™t.

WskazÃ³wki
Jeszcze na sam koniec chciaÅ‚bym wspomnieÄ‡ o kliku waÅ¼nych kwestiach zwiÄ…zanych z tworzeniem diagramÃ³w, opierajÄ…c siÄ™ o metodykÄ™ C4/C3, mianowicie:

* kaÅ¼dy diagram powinien posiadaÄ‡ opis, co przedstawia np. â€ Component Diagram for Book Shop Applicationâ€;
* wszystkie relacje powinny zawieraÄ‡: opis oraz informacje o protokole komunikacyjnym (jeÅ¼eli dany przypadek tego wymaga);
* trzeba rÃ³wnieÅ¼ pamiÄ™taÄ‡, Å¼e kaÅ¼dy kontener czy komponent powinien posiadaÄ‡ opis, ktÃ³ry jednoznacznie opisze funkcjonalnoÅ›ci, ktÃ³re wykonuje.

ZachÄ™cam rÃ³wnieÅ¼ do zapoznania siÄ™ z materiaÅ‚ami, ktÃ³re mogÄ… byÄ‡ pomocne przy tworzeniu architektury opartej o C4:

* https://c4model.com
* https://www.youtube.com/watch?v=x2-rSnhpw0g